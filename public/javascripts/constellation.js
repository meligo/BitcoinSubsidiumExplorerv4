window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}),$(document).ready(function(){var t=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(t=!0),!1===t&&$("canvas").constellation({})}),function(t,i){function n(n,o){var e=t(n),s=n.getContext("2d"),a={star:{color:"rgba(255, 255, 255, 0.6)",width:4},line:{color:"rgba(255, 255, 255, 0.6)",width:.2},position:{x:0,y:0},width:i.innerWidth,height:i.innerHeight,velocity:.1,length:150,distance:120,radius:250,stars:[]},r=t.extend(!0,{},a,o);function h(){this.x=Math.random()*n.width,this.y=Math.random()*n.height,this.vx=r.velocity-.5*Math.random(),this.vy=r.velocity-.5*Math.random(),this.radius=Math.random()*r.star.width}h.prototype={create:function(){s.beginPath(),s.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),s.fill()},animate:function(){var t;for(t=0;t<r.length;t++){var i=r.stars[t];i.y<0||i.y>n.height?(i.vx=i.vx,i.vy=-i.vy):(i.x<0||i.x>n.width)&&(i.vx=-i.vx,i.vy=i.vy),i.x+=i.vx,i.y+=i.vy}},line:function(){var t,i,n,o,e=r.length;for(n=0;n<e;n++)for(o=0;o<e;o++)t=r.stars[n],i=r.stars[o],t.x-i.x<r.distance&&t.y-i.y<r.distance&&t.x-i.x>-r.distance&&t.y-i.y>-r.distance&&t.x-r.position.x<r.radius&&t.y-r.position.y<r.radius&&t.x-r.position.x>-r.radius&&t.y-r.position.y>-r.radius&&(s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(i.x,i.y),s.stroke(),s.closePath())}},this.createStars=function(){var t,i,o=r.length;for(s.clearRect(0,0,n.width,n.height),i=0;i<o;i++)r.stars.push(new h),(t=r.stars[i]).create();t.line(),t.animate()},this.setCanvas=function(){n.width=r.width,n.height=r.height},this.setContext=function(){s.fillStyle=r.star.color,s.strokeStyle=r.line.color,s.lineWidth=r.line.width},this.setInitialPosition=function(){o&&o.hasOwnProperty("position")||(r.position={x:.5*n.width,y:.5*n.height})},this.loop=function(t){t(),i.requestAnimationFrame(function(){this.loop(t)}.bind(this))},this.bind=function(){t(i).on("mousemove",function(t){r.position.x=t.pageX-e.offset().left,r.position.y=t.pageY-e.offset().top})},this.init=function(){this.setCanvas(),this.setContext(),this.setInitialPosition(),this.loop(this.createStars),this.bind()}}t.fn.constellation=function(t){return this.each(function(){new n(this,t).init()})}}($,window);
